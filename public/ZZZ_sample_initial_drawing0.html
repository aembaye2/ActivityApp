<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fabric.js XY Coordinate Grid</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.5.0/fabric.min.js"></script>
    <style>
      canvas {
        border: 1px solid #ccc;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="500" height="400"></canvas>
    <button id="download">Download JSON</button>
    <script>
      const canvas = new fabric.Canvas("canvas")

      // Draw grid
      const gridSize = 50
      const width = canvas.getWidth()
      const height = canvas.getHeight()

      for (let i = 0; i <= width; i += gridSize) {
        canvas.add(
          new fabric.Line([i, 0, i, height], {
            stroke: "#ccc",
            selectable: false,
          })
        )
      }

      for (let i = 0; i <= height; i += gridSize) {
        canvas.add(
          new fabric.Line([0, i, width, i], {
            stroke: "#ccc",
            selectable: false,
          })
        )
      }

      // Draw X and Y axis
      const xAxisYPosition = height - 50 // Adjust this value to move the X axis up or down
      const yAxisXPosition = 50 // Adjust this value to move the Y axis left or right

      canvas.add(
        new fabric.Line([0, xAxisYPosition, width, xAxisYPosition], {
          stroke: "black",
          selectable: false,
        })
      )
      canvas.add(
        new fabric.Line([yAxisXPosition, 0, yAxisXPosition, height], {
          stroke: "black",
          selectable: false,
        })
      )

      // Download JSON functionality
      document
        .getElementById("download")
        .addEventListener("click", function () {
          const json = JSON.stringify(canvas.toJSON())
          const blob = new Blob([json], { type: "application/json" })
          const url = URL.createObjectURL(blob)
          const a = document.createElement("a")
          a.href = url
          a.download = "drawing.json"
          a.click()
          URL.revokeObjectURL(url)
        })
    </script>
  </body>
</html>
